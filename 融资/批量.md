### 文件接口

#### 文件下载
URL:  https://secapi.hulubank.com.cn/devportal/ws/file/download?sysName=aaa&appID=bbb&filePath=ccc

#### 文件上传
URL:  https://secapi.hulubank.com.cn/devportal/ws/file/upload?sysName=aaa&appID=bbb&filePath=ccc

``` C
sysName=NCMS     //融资系统
```

####DRLS[交易流水]
#####文件描述
| 序号   | 项目     | 说明                     |
| :--- | :----- | :--------------------- |
| 1    | 批量交易名称 | 信贷交易流水                 |
| 2    | 数据文件名称 | drls_产品代码_YYYYMMDD.dat |
| 3    | 传输频率   | 天                      |
| 4    | 传输时间窗口 |                        |
| 5    | 数据提供方  | 网贷系统                   |
| 6    | 数据接收方  | 渠道方                    |
#####内容定义
| No.  | 字段代码            | 字段名称        | 数据类型    | 字段内容                                     | 说明       |
| :--- | :-------------- | :---------- | :------ | :--------------------------------------- | :------- |
| 001  | TSerialno       | 交易流水号       | VA(60)  | 流水标识号                                    |          |
| 002  | SerialNo        | 综合业务系统业务标识号 | VA(40)  | 借据号流水号                                   |          |
| 003  | OccurDate       | 发生日期        | DATE    |                                          | YYYYMMDD |
| 004  | TransactionFlag | 交易标志        | VA(20)  | 0：正常交易<br>1：冲正                           |          |
| 005  | OccurDirection  | 发生方向        | VA(20)  | 0：贷款发放<br>1：贷款回收                         |          |
| 006  | OccurType       | 发生类型        | VA(20)  | 0：正常<br>1：逾期<br>2：呆滞<br>3：呆帐<br> 4：提前归还<br>5：预收(贴息) |          |
| 007  | OccurSubject    | 发生摘要        | VA(20)  | “0”代表本金；<br>“1”利息；<br>“2”罚息；<br>“3”复利；<br>“4”费用； |          |
| 008  | BusinessDesc    | 交易描述        | VA(20)  | 0000：放贷<br>0100：正常还本<br>0110：逾期还本<br>0120：呆滞还本<br>0130：呆帐还本<br>4100：提前还本<br>0001：计息入帐<br>0101：正常还息<br>0011：表内挂息<br>0111：表内还息<br>0021：表外挂息<br>0121：表外还息 |          |
| 009  | ActualSum       | 实际发生额       | N(24,6) | 发生的金额                                    |          |
| 010  | SubjectNo       | 发生科目号       | VA(20)  |                                          |          |
| 011  | OrgID           | 机构号         | VA(20)  |                                          |          |

金额类交易标志说明
```
下面说明交易标志的业务含义，便于取数据的接口系统根据情况决定正确的取法。
* 0：一般业务的发生是正常交易；
* 1：如果要取消以前的一笔交易，使用的应该是冲正交易或反交易，冲正交易和原来交易的内容一致，
  金额取原来金额的负数，就是所谓的红字冲正。还有一种方法是使用借贷反向的一个交易完成对原来交易的抵消。
  这两种方法都保证了余额的正确，但后一种方法情况下发生额虚增，因此不太采用。
* 2：上述的1情况下，原来那笔正常交易就变成了被冲正交易。
* 3：如果1、2之后，需要重新执行一笔针对上述交易的正确交易，则这笔交易是补正校验。实际是补正交易是正常交易。
```
上述是一种最详尽的交易记录，有在某些系统中无法区分这些情况，所有的交易都做为正常交易，交易标志在报表程序计算累收累放的时候有关键作用，如果不加以区分可能造成累收累放的虚增。如果冲正交易使用的红字，即使区分不出来1、2、3也可以得到正确的累计数字。如果使用的是反交易，不加以区分那么就有虚增累收累放的结果。


####HKJH [还款计划信息]
#####文件描述
| 序号   | 项目     | 说明                     |
| :--- | :----- | :--------------------- |
| 1    | 批量交易名称 | 个贷还款计划信息               |
| 2    | 数据文件名称 | hkjh_产品代码_YYYYMMDD.dat |
| 3    | 传输频率   | 天                      |
| 4    | 传输时间窗口 |                        |
| 5    | 数据提供方  | 网贷系统                   |
| 6    | 数据接收方  | 渠道方                    |

#####内容定义
| No.  | 字段代码           | 字段名称      | 数据类型    | 字段内容       | 说明                                       |
| :--- | :------------- | :-------- | :------ | :--------- | :--------------------------------------- |
| 001  | ACCOUNTNO      | 贷款业务号     | VA (40) | 贷款业务号      | 信贷的借据编号                                  |
| 002  | PAYDATE        | 应还款日期     | DATE    | 应还款日期      | 原还款计划中的结算/应还款日期。<br>YYYYMMDD             |
| 003  | PERIODPAYDATE  | 宽限期最后一天日期 | DATE    | 宽限期最后一天日期  | 如果该笔贷款有宽限期，<br>提供宽限期最后一天的日期。无宽限期的贷款填空值。<br>YYYYMMDD |
| 004  | PAYCORP        | 应还本金      | N(10,2) | 每期应还本金金额   | 原还款计划中每一期次的应还本金。<br>不需要还本金的期次，填0。        |
| 005  | PAYINTE        | 应还利息      | N(10,2) | 每期应还利息金额   | 原还款计划的每一期次的应还利息。<br>不需要还利息的期次，填0。        |
| 006  | PAYCORPFINE    | 应还本金罚息    | N(10,2) | 每期应还本金罚息   | 如果本期本金未还清，<br>该字段应该有值，金额必须为本期的。          |
| 007  | PAYINTEFINE    | 应还利息罚息    | N(10,2) | 每期应还利息罚息   | 如果本期利息未还清，<br>该字段应该有值，金额必须为本期的。          |
| 008  | ACTUALPAYDATE  | 实际还款日期    | DATE    | 每期次实际还款日期  | 每一期次的实还日期。<br>本期未还款，填空值，如果多次还款，<br>算最后一次。<br>YYYYMMDD |
| 009  | ACTUALCORP     | 实还本金      | N(10,2) | 每期实际还款本金金额 | 每一期次的实际还款本金，<br>本期未还本金，填0，<br>多次还款取累积之和。 |
| 010  | ACTUALINTE     | 实还利息      | N(10,2) | 每期实际还款利息   | 每一期次的实还利息，本期未还利息，<br>填0，多次还款取累积之和。       |
| 011  | ACTUALCORPFINE | 实还本金罚息    | N(10,2) | 每期实际还款本金罚息 | 每一期的实还本金罚息，<br>本期未还本金罚息，填0，<br>多次还款取累积之和。 |
| 012  | ACTUALINTEFINE | 实还利息罚息    | N(10,2) | 每期实际还款利息罚息 | 每一期的实还利息罚息，本期未还本金罚息，填0，<br>多次还款取累积之和。    |
| 013  | PERIODS        | 期数        | N(10,2) | 还款具体期数     |                                          |

####JJXX[借据信息]
#####文件描述
| 序号   | 项目     | 说明                     |
| :--- | :----- | :--------------------- |
| 1    | 批量交易名称 | 借据信息                   |
| 2    | 数据文件名称 | JJXX_产品代码_YYYYMMDD.dat |
| 3    | 传输频率   | 天                      |
| 4    | 传输时间窗口 |                        |
| 5    | 数据提供方  | 网贷系统                   |
| 6    | 数据接收方  | 渠道方                    |

#####内容定义
| No.  | 字段代码               | 字段名称                 | 数据类型         | 字段内容                                     | 说明                                       |
| :--- | :----------------- | :------------------- | :----------- | :--------------------------------------- | :--------------------------------------- |
| 001  | SerialNo           | 综合业务系统业务标识号          | VA(40)       | 借据号                                      | 借据号                                      |
| 002  | RelativeSerialNo1  | 出帐号                  | VA(40)       | 出帐号                                      | 借据号                                      |
| 003  | RelativeSerialNo2  | 合同流水号<br>（信贷系统产生的合同） | VA(40)       | 合同流水号                                    | 借据号                                      |
| 004  | InputDate          | 导入日期                 | DATE         | 数据生成日期                                   | 产生本次数据的业务日期，<br>YYYYMMDD。                |
| 005  | MainCustomerID     | 主机客户号                | VA(40)       | 客户编号                                     |                                          |
| 006  | CustomerName       | 客户名称                 | VA(80)       | 客户名称                                     |                                          |
| 007  | SubjectNo          | 会计科目                 | VA(20)       | 科目号                                      |                                          |
| 008  | BusinessSum        | 发放金额                 | N(24,6)      | 业务金额                                     |                                          |
| 009  | BusinessCurrency   | 币种                   | VA(4)        | 币种                                       | 币种代码                                     |
| 010  | BusinessRate       | 发放利率                 | N(24,6)      | 年利率                                      |                                          |
| 011  | Balance            | 本金总余额                | N(24,6)      | 当前总余额                                    | 总余额 = <br>正常余额+逾期余额<br>+呆滞余额+呆帐余额。       |
| 012  | NormalBalance      | 正常余额                 | N(24,6)      | 当前正常余额                                   | 没有数据时为‘0’                                |
| 013  | OverdueBalance     | 逾期余额                 | N(24,6)      | 当前逾期余额                                   | 没有数据时为‘0’                                |
| 014  | DullBalance        | 呆滞余额                 | N(24,6)      | 当前呆滞余额                                   | 没有数据时为‘0’                                |
| 015  | BadBalance         | 呆帐余额                 | N(24,6)      | 当前呆帐余额                                   | 没有数据时为‘0’                                |
| 016  | InterestBalance1   | 表内欠息余额               | N(24,6)      | 当前表内欠息余额                                 | 没有数据时为‘0’                                |
| 017  | InterestBalance2   | 表外欠息余额               | N(24,6)      | 当前表外欠息余额                                 | 没有数据时为‘0’                                |
| 018  | FineBalance1       | 逾期罚息余额               | N(24,5)      | 逾期罚息余额                                   | 没有数据时为‘0’                                |
| 019  | FineBalance2       | 复息余额                 | N(24,6)      | 复息余额余额                                   | 没有数据时为‘0’                                |
| 020  | ActualPutoutDate   | 起始日期                 | DATE         | 起始日期                                     |                                          |
| 021  | ActualMaturity     | 到期日期                 | DATE         | 到期日期                                     |                                          |
| 022  | FinishDate         | 终结日期                 | DATE         | 终结日期                                     |                                          |
| 023  | TABalance          | 分期业务应还本金             | N(24,6)      | 当期应还本金                                   | 留空                                       |
| 024  | TAInterestBalance  | 分期业务应还利息             | N(24,6)      | 当期应还利息                                   | 留空                                       |
| 025  | TATimes            | 累计欠款期数               | INT          | 累计欠款期数                                   | 留空                                       |
| 026  | LCATimes           | 连续欠款期数               | INT          | 连续欠款期数                                   | 留空                                       |
| 027  | ExtendTimes        | 展期次数                 | INT          | 展期次数                                     |                                          |
| 028  | AdvanceFlag        | 垫款标志                 | VA(1)        | 1：垫款<br>2：正常                             |                                          |
| 029  | PayBackAccount     | 还款帐号                 | VA(40)       | 还款帐号                                     | 还款帐，如果有多个帐号，<br>则取主要的，没有可以留空             |
| 030  | PayInterestAccount | 还息帐号                 | VA(40)       | 还息帐号                                     | 还息帐号，<br>没有可以留空                          |
| 031  | BailAccount        | 保证金帐号                | VA(40)       | 保证金帐号                                    |                                          |
| 032  | PutOutAccount      | 放款帐号                 | VA(40)       | 放款帐号                                     | 同上                                       |
| 033  | MainOrgID          | 机构号                  | VA(40)       | 综合业务系统机构号                                |                                          |
| 034  | Classify4          | 4级分类                 | A(2)         | 10-正常<br>20-逾期<br>21-逾期天数<=30 <br>22-逾期天数<90天<br>23-逾期天数>=90<br>30-呆滞<br>40-呆帐 | 如果实在不能区分<br>逾期的具体情形状态，<br>填写逾期大类20具体<br>逾期天数见逾期天数字段 |
| 035  | ReturnType         | 贷款结束方式               | A(2)         | 01-正常收回                                  |                                          |
| 036  | BailPercent        | 保证金比例                | DOUBLE       |                                          |                                          |
| 037  | PaymentType信用证付款期限 | A(1)                 | 1-即期<br>2-远期 |                                          |                                          |
| 038  | TermsFreq          | 还款频率                 | A(2)         | 01-日；<br>02-周；<br>03-月；<br>04-季；<br>05-半年；<br>06-年；<br>07-一次性；<br>08-不定期<br>（贷款期限内任意时间还款）；<br>99-其他。<br>贷款的还款频率：<br>如果本金和利息还款频率不同，<br>取最小的还款频率；<br>历史数据迁移时需要给准确还款频率 |                                          |
| 039  | BusinessStatus     | 业务状态                 | A(2)         | 01-正常                                    | 当前业务状态                                   |
| 040  | GracePeriod        | 逾期天数                 | INT          | 逾期天数                                     |                                          |
| 041  | ol_outstanding     | 贷款余额                 | DOUBLE       | 贷款余额                                     |                                          |
| 042  | os_less_past_due   | 未到期本金                | DOUBLE       | 未到期本金                                    |                                          |
| 043  | pri_amt            | 应还本金                 | DOUBLE       | 应还本金                                     |                                          |
| 044  | fee_amt            | 应还费用                 | DOUBLE       | 应还费用                                     |                                          |
| 045  | not_invoice_int    | 未出单利息                | DOUBLE       | 未出单利息                                    |                                          |
| 046  | not_invoice_odp    | 未出单罚息                | DOUBLE       | 未出单罚息                                    |                                          |
| 047  | not_invoice_odi    | 未出单复利                | DOUBLE       | 未出单复利                                    |                                          |

```
注：35-40黄色部分是人民银行企业征信的扩展字段，请根据项目情况确定是否需要。
```
**关键项注意事项：**
```
1、出账号。任何情况下，出账号必须按照约定的规范提供，如果是在不能提供，宁可置空，且不给其他的数据，否则将造成严重数据混乱。
2、第35-40部分为征信需要的信息，如果这些信息不全征信系统上报不能按照人民行要的要求进行严格正确的上报。
3、第24-28部分为保留信息，主要看信贷需求（标准产品中无此要求）中有无这方面的管理要求，不提供时，按照说明中的缺省值设置。
```
####LPMX[理赔明细]
#####文件描述
| 序号   | 项目     | 说明                     |
| :--- | :----- | :--------------------- |
| 1    | 批量交易名称 | 理赔明细                   |
| 2    | 数据文件名称 | LPMX_产品代码_YYYYMMDD.dat |
| 3    | 传输频率   | 天                      |
| 4    | 传输时间窗口 |                        |
| 5    | 数据提供方  | 网贷系统                   |
| 6    | 数据接收方  | 渠道方                    |
#####内容定义
| No.  | 字段代码          | 字段名称  | 数据类型    | 字段内容  | 说明   |
| :--- | :------------ | :---- | :------ | :---- | :--- |
| 001  | ACCOUNTNO     | 批次号   | VA (40) | 批次号   |      |
| 002  | CLAIMSDATE    | 理赔日期  | DATE    | 理赔日期  |      |
| 003  | CUSNAME       | 用户姓名  | VA (60) | 用户姓名  |      |
| 004  | CERTCODE      | 用户身份证 | VA (20) | 用户身份证 |      |
| 005  | APPNO         | 放款流水号 | VA (40) | 放款流水号 |      |
| 006  | CLAIMSAMT     | 理赔本金  | N(10,2) | 理赔本金  |      |
| 007  | CLAIMSINTST   | 理赔利息  | N(10,2) | 理赔利息  |      |
| 008  | CLAIMSPRATE   | 理赔罚息  | N(10,2) | 理赔罚息  |      |
| 009  | CLAIMSLOANAMT | 理赔总金额 | N(10,2) | 理赔总金额 |      |

####BATCHREPAYREQ[到期扣款请求文件]
#####文件描述
| 序号   | 项目     | 说明                                       |
| :--- | :----- | :--------------------------------------- |
| 1    | 批量交易名称 | 到期扣款文件                                   |
| 2    | 数据文件名称 | BATCHREPAYREQ_产品代码_YYYYMMDD＿＊ .dat<br>(＊ 从01~99按顺序计数，批次号) |
| 3    | 传输频率   | 一天多次                                     |
| 4    | 传输时间窗口 | 16：00前                                   |
| 5    | 数据提供方  | 合作平台                                     |
#####内容定义
| No.  | 中文名称    | 英文名称          | 数据类型     | 必须   | 备注                 |
| :--- | :------ | :------------ | :------- | :--- | :----------------- |
| 1    | 外部流水号   | OUTTRADEID    | VA (100) | M    | 外部流水号              |
| 2    | 贷款号     | LOAN_NO       | VA (50)  | M    | 贷款合同号              |
| 3    | 产品编号    | PRD_CODE      | VA（30）   | M    | 产品编号               |
| 4    | 批次号     | BAT_NO        | VA（30）   | O    | 批次号                |
| 5    | 还款日期    | RECEIPT_DATE  | VA (8)   | M    | 应该默认为交易日期          |
| 6    | 结算方式    | SETTLE_METHOD | VA (3)   | M    | AB2不发短信<br>发短信送RB2 |
| 7    | 提前还款手续费 | PRE_FEE_AMT   | N(17,2)  | O    |                    |
| 8    | 卡号/折号   | ACCT_CARD_NO  | VA (32)  | O    | 必填                 |
| 9    | 持卡人姓名   | CUST_NAME     | VA (100) | O    | 必填                 |
| 10   | 证件类型    | CERT_TYPE     | VA (20)  | O    | 必填                 |
| 11   | 证件号     | CERT_CODE     | VA (25)  | O    | 必填                 |
| 12   | 电话号码    | PHONE         | VA (15)  | O    | 必填                 |

####BATCHREPAYRES[到期扣款应答文件]
#####文件描述
| 序号   | 项目     | 说明                                       |
| :--- | :----- | :--------------------------------------- |
| 1    | 批量交易名称 | 到期扣款文件                                   |
| 2    | 数据文件名称 | BATCHREPAYRES_产品代码_YYYYMMDD＿＊.dat<br>(＊ 从01~99按顺序计数，批次号) |
| 3    | 传输频率   | 一天多次                                     |
| 4    | 传输时间窗口 | 16：00前                                   |
| 5    | 数据提供方  | 合作平台                                     |
#####内容定义
| No.  | 中文名称  | 英文名称           | 数据类型     | 备注    |
| :--- | :---- | :------------- | :------- | :---- |
| 1    | 回收交易号 | RECEIPT_NO     | VA (12)  |       |
| 2    | 外部交易号 | OUTTRADEID     | VA (100) |       |
| 3    | 交易号   | SEARNO         | VA (100) |       |
| 4    | 回收本金  | EXPNORM_AMT    | N(17,2)  |       |
| 5    | 回收利息  | EXPINTE_AMT    | N(17,2)  |       |
| 6    | 回收罚息  | PENALTY_INTST  | N(17,2)  |       |
| 7    | 回收复利  | COMPOUND_INTST | N(17,2)  |       |
| 8    | 回收手续费 | FEE_AMT        | N(17,2)  |       |
| 9    | 交易金额  | TRAN_AMT       | N(17,2)  |       |
| 10   | 备注    | REMARKS        | VA (100) |       |
| 11   | 响应码   | STATUS         | VA (10)  |       |
| 12   | 应答信息  | STATEDESC      | VA (50)  |       |
| 13   | 交易时间  | TRANSTIME      | VA (20)  |       |
| 14   | 贷款号   | LOAN_NO        | VA (30)  | 贷款合同号 |

----
#### 修订记录
```
2017-03-31:新增：正常还款请求文件、正常还款响应文件、到期扣款请求文件、到期扣款响应文件
```